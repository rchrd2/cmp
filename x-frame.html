<!-- Defines element markup -->
<template>
    <style>
    #x-frame-wrapper {
      width: 300px;
    }
    input {
      width:100%;
      height: 28px;
      padding: 2px;
      font-size:14px;
      margin:0;
    }
    iframe {
      width: 100%;
    }
    </style>
    <div id="x-frame-wrapper">
      <div><input type="text" value="https://example.com" /></div>
      <div>
        <iframe src="https://example.com" height="300">
         <p>Your browser does not support iframes.</p>
        </iframe>
      </div>
    </div>
</template>

<script>
(function(window, document, undefined) {
    // Refers to the "importer", which is index.html
    var thatDoc = document;

    // Refers to the "importee", which is src/hello-world.html
    var thisDoc =  (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

    // Gets content from <template>
    var template = thisDoc.querySelector('template').content;

    // Creates an object based in the HTML Element prototype
    var MyElementProto = Object.create(HTMLElement.prototype);

    // Creates the "who" attribute and sets a default value
    MyElementProto.who = 'World';

    // Fires when an instance of the element is created
    MyElementProto.createdCallback = function() {
        // Creates the shadow root
        var shadowRoot = this.createShadowRoot();

        // Adds a template clone into shadow root
        var clone = thatDoc.importNode(template, true);
        shadowRoot.appendChild(clone);

        // Caches <strong> DOM query
        this.iframe = shadowRoot.querySelector('strong');

        // Checks if the "who" attribute has been overwritten
        if (this.hasAttribute('who')) {
            var who = this.getAttribute('who');
            this.setWho(who);
        }
        else {
            this.setWho(this.who);
        }
    };

    // Fires when an attribute was added, removed, or updated
    MyElementProto.attributeChangedCallback = function(attr, oldVal, newVal) {
        if (attr === 'who') {
            this.setWho(newVal);
        }
    };

    // Sets new value to "who" attribute
    MyElementProto.setWho = function(val) {
        this.who = val;

        // Sets "who" value into <strong>
        this.iframe.textContent = this.who;
    };

    // Registers <hello-world> in the main document
    window.MyElement = thatDoc.registerElement('x-frame', {
        prototype: MyElementProto
    });
})(window, document);
</script>
